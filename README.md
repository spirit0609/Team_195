<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Run and deploy your AI Studio app

This contains everything you need to run your app locally.

View your app in AI Studio: https://ai.studio/apps/drive/1ZEUTjGltvImoONIgRwSjmDEiWNyt_OVJ

## Run Locally

**Prerequisites:**  Node.js


1. Install dependencies:
   `npm install`
2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key
3. Run the app:
   `npm run dev`




ーーーー

アプリ概要
アプリ名: Order Parser (オーダーパーサー) 目的: Amazonや業者からの請求書・納品書（PDF/画像）をアップロードすると、AIが内容を解析し、大学の会計システム（購入依頼入力）に適した形式で一覧表示・CSVダウンロードできるWebアプリ。
機能要件
A. ファイルアップロード機能
ドラッグ＆ドロップエリア: PDFファイル、または画像ファイル（JPG, PNG）を受け付ける。

複数ページ対応: 複数ページにまたがる請求書（Amazonビジネスの明細書など）も1つのファイルとして処理する。

リセット機能: アップロードしたファイルをクリアして最初からやり直せるボタン。

B. AI解析・データ抽出機能 (Backend / API)

使用モデル: Gemini 1.5 Pro または Flash (マルチモーダル対応のため)。

抽出項目: アップロードされたファイルから以下の情報を構造化データとして抽出する。

基本情報: 起案日（注文日）、依頼者名、納入先、相手先（業者名）。

明細情報（リスト）: 品名、数量、単価（税込）。

自動計算ロジック:

AIは「税込単価」と「数量」を抽出する。

アプリ側（またはAIへの指示）で、以下の計算を行うこと。

金額（税込） = 税込単価 × 数量

本体価格 = 金額 ÷ 1.1 （円未満切り捨て等の端数処理を考慮）

消費税額 = 金額 - 本体価格

C. 結果確認・編集エリア (UI)

プレビュー表示: 左側にアップロードしたPDFを表示（任意、技術的に難しければ省略可）。

編集可能なテーブル: 右側（または下部）に解析結果をテーブル表示する。

ユーザーが手動で「品名」「数量」「単価」などを修正できるようにする（OCRミス修正用）。

行の追加・削除機能。

合計金額表示: テーブルの合計金額（税込）を常に計算して表示し、元のPDFの請求額と合っているか確認しやすくする。

D. エクスポート機能

CSVダウンロード: 編集後のデータを特定のフォーマットでCSV出力する。

フォーマット要件: 大学の「購入依頼入力.csv」互換形式。

必須カラム: 起案日, 依頼者, 納入先名, 相手先, 品名, 数量, 単位, 単価, 本体価格, 税額

エンコーディング: Shift_JIS または UTF-8 with BOM (Excelで文字化けしない形式)。

UIデザイン指針
テーマ: 「知的生産性」を意識したクリーンでミニマルなデザイン。白とスレートグレーを基調に、アクセントカラーに知的な青（Royal Blue）を使用。
レイアウト:

ヘッダー：アプリ名とシンプルなアイコン。

メイン：上部にアップロードエリア、下部にデータテーブル。

フィードバック: 解析中は「明細を読み取っています...」等のローディングアニメーションを表示する。

プロンプトエンジニアリング（AIへの指示）
システムプロンプトには以下を含めること：
「あなたは経理事務の専門家です。渡された請求書画像から、日付、業者名、そして購入品目の明細（商品名、数量、単価）を正確にJSON形式で抽出してください。商品名が長い場合は、重要な型番やキーワードを残して適度に要約してください。内訳テーブル以外の不要なテキスト（広告や注釈）は無視してください。」
